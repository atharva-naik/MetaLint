{
    "blob_id": "774933a7d78bec56eba238a91f08a854499957f0",
    "violations": [
      {
        "start_lineno": 722,
        "end_lineno": 738,
        "pep": "525",
        "line": "def __aiter__(cls):",
        "span": "def __aiter__(cls):\n                cls.directories = collections.deque()\n                return cls\n\n            async def __anext__(cls):\n                if cls.stream is None:\n                    cls.stream = await cls._new_stream(path)\n                while True:\n                    line = await cls.stream.readline()\n                    while not line:\n                        await cls.stream.finish()\n                        if cls.directories:\n                            current_path, info = cls.directories.popleft()\n                            cls.stream = await cls._new_stream(current_path)\n                            line = await cls.stream.readline()\n                        else:\n                            raise StopAsyncIteration\n\n                    try:\n                        name, info = cls.parse_line(line)\n                    except Exception:\n                        continue\n\n                    stat = cls.path / name, info\n                    if info[\"type\"] == \"dir\" and recursive:\n                        cls.directories.append(stat)\n                    return stat",
        "fix": [
          {
            "before": "def __aiter__(cls):\n                cls.directories = collections.deque()\n                return cls\n\n            async def __anext__(cls):\n                if cls.stream is None:\n                    cls.stream = await cls._new_stream(path)\n                while True:\n                    line = await cls.stream.readline()\n                    while not line:\n                        await cls.stream.finish()\n                        if cls.directories:\n                            current_path, info = cls.directories.popleft()\n                            cls.stream = await cls._new_stream(current_path)\n                            line = await cls.stream.readline()\n                        else:\n                            raise StopAsyncIteration\n\n                    try:\n                        name, info = cls.parse_line(line)\n                    except Exception:\n                        continue\n\n                    stat = cls.path / name, info\n                    if info[\"type\"] == \"dir\" and recursive:\n                        cls.directories.append(stat)\n                    return stat",
            "after": "async def __aiter__(cls):\n                cls.directories = collections.deque()\n                cls.stream = None\n                try:\n                    cls.stream = await cls._new_stream(path)\n                    while True:\n                        line = await cls.stream.readline()\n                        while not line:\n                            await cls.stream.finish()\n                            if cls.directories:\n                                current_path, info = cls.directories.popleft()\n                                cls.stream = await cls._new_stream(current_path)\n                                line = await cls.stream.readline()\n                            else:\n                                return\n\n                        try:\n                            name, info = cls.parse_line(line)\n                        except Exception:\n                            continue\n\n                        stat = cls.path / name, info\n                        if info[\"type\"] == \"dir\" and recursive:\n                            cls.directories.append(stat)\n                        yield stat\n                except Exception as e:\n                    if cls.stream:\n                        await cls.stream.finish()\n                    raise e"
          }
        ]
      }
    ]
  }