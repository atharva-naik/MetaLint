{
    "blob_id": "8e75b7716a428394722adb3cf988320cd3c06197",
    "violations": [
      {
        "start_lineno": 58,
        "end_lineno": 77,
        "pep": "525",
        "line": "    def __aiter__(self) -> \"Body\":",
        "span": "    def __aiter__(self) -> \"Body\":\n        return self\n\n    async def __anext__(self) -> bytes:\n        if self._must_raise is not None:\n            raise self._must_raise\n\n        # if we got all of the data in the first shot, then self._complete is\n        # set and self._has_data will not get set again, so skip the await\n        # if we already have completed everything\n        if not self._complete.is_set():\n            await self._has_data.wait()\n\n        if self._complete.is_set() and len(self._data) == 0:\n            raise StopAsyncIteration()\n\n        data = bytes(self._data)\n        self._data.clear()\n        self._has_data.clear()\n        return data",
        "fix": [
          {
            "before": "    def __aiter__(self) -> \"Body\":\n        return self\n\n    async def __anext__(self) -> bytes:\n        if self._must_raise is not None:\n            raise self._must_raise\n\n        # if we got all of the data in the first shot, then self._complete is\n        # set and self._has_data will not get set again, so skip the await\n        # if we already have completed everything\n        if not self._complete.is_set():\n            await self._has_data.wait()\n\n        if self._complete.is_set() and len(self._data) == 0:\n            raise StopAsyncIteration()\n\n        data = bytes(self._data)\n        self._data.clear()\n        self._has_data.clear()\n        return data",
            "after": "    async def __aiter__(self):\n        while True:\n            if self._must_raise is not None:\n                raise self._must_raise\n\n            # if we got all of the data in the first shot, then self._complete is\n            # set and self._has_data will not get set again, so skip the await\n            # if we already have completed everything\n            if not self._complete.is_set():\n                await self._has_data.wait()\n\n            if self._complete.is_set() and len(self._data) == 0:\n                return\n\n            data = bytes(self._data)\n            self._data.clear()\n            self._has_data.clear()\n            yield data"
          }
        ]
      }
    ]
  }